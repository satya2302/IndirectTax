<div class="main-content">
  <div class="toolbar toolbar-modern">
    <button class="toolbar-btn import-btn" (click)="fileInput.click()">
      <span class="toolbar-icon">&#43;</span> <span class="toolbar-label">Import</span>
    </button>
    <input #fileInput type="file" accept=".csv" (change)="onFileSelected($event)" style="display:none" />
    <span *ngIf="fileName">Selected: {{ fileName }}</span>
    <span *ngIf="loading">Uploading...</span>
    <span *ngIf="uploadSuccess && !loading" style="color:green">Upload complete!</span>
    <span *ngIf="uploadError" class="error">{{ uploadError }}</span>
  </div>
  <div *ngIf="filteredData.length > 0">
    <div class="entities-grid">
      <div class="grid-row">
        <div class="grid-cell header">
          Region
          <input type="text" [(ngModel)]="filters['region']" (input)="onFilterChange()" placeholder="Filter region...">
        </div>
        <div class="grid-cell header">
          City
          <input type="text" [(ngModel)]="filters['city']" (input)="onFilterChange()" placeholder="Filter city...">
        </div>
        <div class="grid-cell header">
          County
          <input type="text" [(ngModel)]="filters['county']" (input)="onFilterChange()" placeholder="Filter county...">
        </div>
        <div class="grid-cell header">
          Entity
          <input type="text" [(ngModel)]="filters['entity']" (input)="onFilterChange()" placeholder="Filter entity...">
        </div>
        <div class="grid-cell header">
          District
          <input type="text" [(ngModel)]="filters['district']" (input)="onFilterChange()" placeholder="Filter district...">
        </div>
        <div class="grid-cell header">
          Gross
          <input type="text" [(ngModel)]="filters['gross']" (input)="onFilterChange()" placeholder="Filter gross...">
        </div>
        <div class="grid-cell header">
          Taxable
          <input type="text" [(ngModel)]="filters['taxable']" (input)="onFilterChange()" placeholder="Filter taxable...">
        </div>
        <div class="grid-cell header">
          Input Source
          <input type="text" [(ngModel)]="filters['inputSource']" (input)="onFilterChange()" placeholder="Filter input source...">
        </div>
        <div class="grid-cell header">
          Place Determination
          <input type="text" [(ngModel)]="filters['placeDetermination']" (input)="onFilterChange()" placeholder="Filter place...">
        </div>
        <div class="grid-cell header">
          Entry Id
          <input type="text" [(ngModel)]="filters['entryId']" (input)="onFilterChange()" placeholder="Filter entry ID...">
        </div>
        <div class="grid-cell header">
          Id
          <input type="text" [(ngModel)]="filters['id']" (input)="onFilterChange()" placeholder="Filter ID...">
        </div>
        <div class="grid-cell header">
          Log Id
          <input type="text" [(ngModel)]="filters['logId']" (input)="onFilterChange()" placeholder="Filter log ID...">
        </div>
        <div class="grid-cell header">
          Tax Rate
          <input type="text" [(ngModel)]="filters['taxRate']" (input)="onFilterChange()" placeholder="Filter tax rate...">
        </div>
        <div class="grid-cell header">
          Year
          <input type="text" [(ngModel)]="filters['year']" (input)="onFilterChange()" placeholder="Filter year...">
        </div>
        <div class="grid-cell header">
          Month
          <input type="text" [(ngModel)]="filters['month']" (input)="onFilterChange()" placeholder="Filter month...">
        </div>
      </div>
      <div class="grid-row" *ngFor="let row of pagedData">
        <div class="grid-cell">{{ row.region }}</div>
        <div class="grid-cell">{{ row.city }}</div>
        <div class="grid-cell">{{ row.county }}</div>
        <div class="grid-cell">{{ row.entity }}</div>
        <div class="grid-cell">{{ row.district }}</div>
        <div class="grid-cell">{{ row.gross }}</div>
        <div class="grid-cell">{{ row.taxable }}</div>
        <div class="grid-cell">{{ row.inputSource }}</div>
        <div class="grid-cell">{{ row.placeDetermination }}</div>
        <div class="grid-cell">{{ row.entryId }}</div>
        <div class="grid-cell">{{ row.id }}</div>
        <div class="grid-cell">{{ row.logId }}</div>
        <div class="grid-cell">{{ row.taxRate }}</div>
        <div class="grid-cell">{{ row.year }}</div>
        <div class="grid-cell">{{ row.month }}</div>
      </div>
    </div>
    <div class="pagination-controls">
      <button (click)="prevPage()" [disabled]="page === 1">Previous</button>
      <span>Page {{ page }} of {{ totalPages }}</span>
      <button (click)="nextPage()" [disabled]="page === totalPages">Next</button>
    </div>
  </div>
</div>
